<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <!-- Viewport fit=cover for iPhone’s notch, ensures safe-area insets -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>Be My Valentine?</title>
  <!-- Existing fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet" />
  <!-- Additional fonts for counter boxes, gallery text, main text, and buttons -->
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;700&family=Space+Grotesk:wght@400;500&display=swap" rel="stylesheet" />
  <style>
    :root {
      --primary-color: #ff6b81;
      --secondary-color: #ffffff;
      --background-gradient: radial-gradient(circle at top left, #f9c6d5, #d6a4e7, #a18cd1, #fbc2eb);

      /* Updated fonts:
         - DS Sans (DM Sans) will be used for Titles.
         - Space Grotesk will be used for black texts.
      */
      --font-sans: "Poppins", sans-serif;
      --font-ds: "DM Sans", sans-serif;
      --font-sg: "Space Grotesk", sans-serif;

      /* Safe area variables for notched screens (iPhones) */
      --safe-area-inset-top: env(safe-area-inset-top, 20px);
      --safe-area-inset-right: env(safe-area-inset-right, 20px);
      --safe-area-inset-bottom: env(safe-area-inset-bottom, 20px);
      --safe-area-inset-left: env(safe-area-inset-left, 20px);

      /* Colors, transitions, shadows */
      --pink-50: #ffd6e9;
      --pink-800: #9d174d;
      --red-400: #ff4d8d;
      --gray-700: #555;

      --transition-ease: 0.4s ease-out;
      --transition-default: all 0.4s ease;
      --box-shadow-card: 0 5px 20px rgba(0, 0, 0, 0.1);
      --box-shadow-hover: 0 15px 40px rgba(0, 0, 0, 0.2);
      --box-shadow-counter: 0 5px 15px rgba(0, 0, 0, 0.1);
      --box-shadow-larger: 0 15px 35px rgba(0, 0, 0, 0.15);
      --box-shadow-medium: 0 10px 25px rgba(0, 0, 0, 0.2);

      /* Custom multi-layered shadow for the NO button */
      --no-btn-shadow: 
        0.5px 0.5px 0 0 #000,
        1px 1px 0 0 #000,
        1.5px 1.5px 0 0 #000,
        2px 2px 0 0 #000,
        2.5px 2.5px 0 0 #000,
        3px 3px 0 0 #000,
        0 0 0 2px #ccc,
        0.5px 0.5px 0 2px #ccc,
        1px 1px 0 2px #ccc,
        1.5px 1.5px 0 2px #ccc,
        2px 2px 0 2px #ccc,
        2.5px 2.5px 0 2px #ccc,
        3px 3px 0 2px #ccc,
        3.5px 3.5px 0 2px #ccc,
        4px 4px 0 2px #ccc;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: var(--font-sans);
      color: #000;
      background: var(--background-gradient);
      min-height: 100vh;
      padding: var(--safe-area-inset-top) var(--safe-area-inset-right) var(--safe-area-inset-bottom) var(--safe-area-inset-left);
      overflow-x: hidden;
    }

    @media (pointer: fine) {
      body {
        cursor: none;
      }
    }

    /* Mini Heart Element and Pop-Dots (from provided example) */
    .heart-icon {
      position: absolute;
      top: 1.5rem;
      right: 1.5rem;
      width: 24px;
      height: 24px;
      color: #ff3366;
      z-index: 0;
    }
    .pop-dots {
      position: absolute;
      bottom: -10px;
      left: -10px;
      width: 40px;
      height: 40px;
      background-image: radial-gradient(#000 2px, transparent 2px);
      background-size: 10px 10px;
      opacity: 0.3;
      z-index: 0;
    }

    /* Counter Boxes Styled as Retro Cards with Smaller, Squared 1:1 Ratio */
    .time-counter {
      position: fixed;
      top: max(var(--safe-area-inset-top), 20px);
      background: #fff;
      border: 3px solid #000;
      border-radius: 2px;
      box-shadow: 8px 8px 0 #000;
      /* Set padding to allow space for the heart icon */
      padding: 1rem;
      padding-top: 2.5rem; /* extra top space for heart icon */
      /* Set square dimensions */
      width: 200px;
      height: 200px;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      text-align: center;
      line-height: 1.4;
      z-index: 1001;
    }
    .time-counter:hover {
      transform: translate(-4px, -4px);
      box-shadow: 12px 12px 0 #000;
    }
    .time-counter:active {
      transform: translate(2px, 2px);
      box-shadow: 6px 6px 0 #000;
    }
    .time-counter .counter-label {
      display: block;
      font-family: var(--font-ds);
      font-weight: 700;
      font-size: 1.5rem;
      color: #f472b6;
      margin-bottom: 0.5rem;
      letter-spacing: 0.02em;
      text-align: center;
    }
    .time-values {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      font-family: var(--font-sg);
    }
    .time-values .numbers {
      display: flex;
      gap: 10px;
      font-size: 1.5rem;
    }
    .time-values .labels {
      display: flex;
      gap: 10px;
      font-size: 1rem;
      margin-top: 5px;
    }
    /* Positioning for the two counter boxes */
    #dating-counter {
      right: max(var(--safe-area-inset-right), 20px);
    }
    #valentine-counter {
      left: max(var(--safe-area-inset-left), 20px);
    }

    /* Disable hover effects for counter boxes on MOBILE only */
    @media (pointer: coarse) {
      .time-counter:hover {
        transform: none !important;
        box-shadow: 8px 8px 0 #000 !important;
      }
    }

    /* Proper and symmetrical spacing for counter cards when stacked on mobile */
    @media (max-width: 768px) {
      .time-counter {
        position: relative !important;
        display: block !important;
        width: 90% !important;
        height: auto !important;
        padding: 1rem !important;
        border: 3px solid #000 !important;
        border-radius: 2px !important;
        box-shadow: 8px 8px 0 #000 !important;
        margin: 30px auto !important;
        margin-bottom: 30px !important;
      }
      #dating-counter,
      #valentine-counter {
        left: auto !important;
        right: auto !important;
      }
      /* Adjust heart icon for mobile */
      .heart-icon {
        top: 10px;
        right: 10px;
        width: 20px;
        height: 20px;
      }
      /* Remove the dots on mobile design for counter boxes */
      .pop-dots {
        display: none;
      }
    }

    /* Funny Message */
    .funny-message {
      position: fixed;
      background-color: white;
      color: var(--primary-color);
      padding: 15px 30px;
      border-radius: 10px;
      font-size: clamp(1em, 3vw, 1.2em);
      z-index: 1000;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      opacity: 0;
      text-align: center;
      max-width: 90%;
      pointer-events: none;
      transform: translate(-50%, -100%);
      transition: top var(--transition-ease), left var(--transition-ease), opacity 0.3s;
    }

    /* Floating Elements */
    .floating-elements {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
      overflow: hidden;
    }
    .floating-element {
      position: absolute;
      animation: float linear infinite;
      opacity: 0.6;
      font-size: 1.5em;
      user-select: none;
    }
    @keyframes float {
      0% {
        transform: translateY(-20px) rotate(0deg);
        opacity: 0;
      }
      10% {
        opacity: 0.6;
      }
      90% {
        opacity: 0.6;
      }
      100% {
        transform: translateY(105vh) rotate(360deg);
        opacity: 0;
      }
    }

    /* Confetti Container */
    .confetti-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 999;
    }

    /* Custom Cursor */
    .custom-cursor {
      position: fixed;
      color: var(--secondary-color);
      font-size: 24px;
      pointer-events: none;
      z-index: 1002;
      background: transparent;
      border-radius: 0;
      box-shadow: none;
      text-shadow: 0 0 8px rgba(255, 255, 255, 0.6);
      transition: transform 0.2s ease;
    }
    .custom-cursor.hover-yes {
      transform: scale(1.5);
    }
    @media (pointer: coarse) {
      .custom-cursor {
        display: none;
      }
    }

    /* Gallery Section 
       Thematic changes: Apply the same styling as counter boxes to the main gallery box.
       - Use DS Sans for Titles (gallery title) and Space Grotesk for the black texts.
    */
    .gallery-section {
      width: min(90%, 1000px);
      margin: 150px auto;
      padding: 60px;
      background: #fff;
      border: 3px solid #000;
      box-shadow: 8px 8px 0 #000;
      border-radius: 2px;
      animation: fadeIn 1.5s ease-in-out;
      font-family: var(--font-sg);
    }
    .gallery-title {
      font-family: var(--font-ds);
      color: var(--primary-color);
      font-size: clamp(2.2em, 6vw, 4em);
      text-align: center;
      margin-bottom: 60px;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
      position: relative;
    }
    .gallery-title:after {
      content: "";
      position: absolute;
      bottom: -15px;
      left: 50%;
      transform: translateX(-50%);
      width: 100px;
      height: 3px;
      background: linear-gradient(90deg, transparent, var(--primary-color), transparent);
    }
    .gallery-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 40px;
      padding: 20px;
      max-width: 1200px;
      margin: 0 auto;
    }
    .gallery-item {
      position: relative;
      transform-origin: center;
      aspect-ratio: 1;
      overflow: hidden;
      border-radius: 30px;
      box-shadow: var(--box-shadow-card);
      transition: var(--transition-default);
    }
    .gallery-item::before {
      content: "";
      position: absolute;
      width: 200px;
      height: 130%;
      background-image: linear-gradient(180deg, rgba(99, 102, 241, 0.8), rgba(168, 85, 247, 0.8), rgba(236, 72, 153, 0.8));
      filter: blur(20px);
      top: 0;
      left: 0;
      z-index: 1;
      animation: rotBGimg 8s cubic-bezier(0.8, 0.2, 0.2, 0.8) infinite;
      transition: opacity var(--transition-ease);
      opacity: 0;
    }
    .gallery-item:hover::before {
      opacity: 1;
    }
    @keyframes rotBGimg {
      0% {
        transform: rotate(0deg) scale(1);
      }
      50% {
        transform: rotate(180deg) scale(1.2);
      }
      100% {
        transform: rotate(360deg) scale(1);
      }
    }
    .gallery-item::after {
      content: "";
      position: absolute;
      inset: 5px;
      border-radius: 30px;
      background: #ffffff;
      backdrop-filter: blur(10px);
      box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.1);
      z-index: 2;
    }
    .gallery-frame {
      position: relative;
      z-index: 3;
      width: 100%;
      height: 100%;
      padding: 20px;
      display: flex;
      flex-direction: column;
      box-sizing: border-box;
      border-radius: 30px;
    }
    .glass-overlay {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 50%, rgba(255, 255, 255, 0) 100%);
      border-radius: 30px;
      pointer-events: none;
      z-index: 2;
    }
    .gallery-image {
      width: 100%;
      height: calc(100% - 40px);
      object-fit: cover;
      border-radius: 30px;
      transition: var(--transition-default);
      cursor: pointer;
    }
    .gallery-caption {
      font-family: var(--font-sg);
      color: #000;
      font-size: clamp(1em, 3vw, 1.2em);
      text-align: center;
      margin: 10px auto 0 auto;
      padding: 0 10px;
      line-height: 1.4;
      transition: all 0.3s ease;
    }
    .gallery-item:hover {
      transform: translateY(-5px);
      box-shadow: var(--box-shadow-hover);
    }
    .gallery-item:hover .gallery-image {
      transform: scale(1.05);
    }
    .gallery-item:hover .gallery-caption {
      color: var(--primary-color);
      transform: translateY(-2px);
    }
    /* Gallery Modal */
    .gallery-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.9);
      z-index: 1000;
      justify-content: center;
      align-items: center;
      padding: max(var(--safe-area-inset-top), 20px) max(var(--safe-area-inset-right), 20px) max(var(--safe-area-inset-bottom), 20px) max(var(--safe-area-inset-left), 20px);
    }
    .gallery-modal-content {
      max-width: 90%;
      max-height: 90vh;
      position: relative;
    }
    .gallery-modal-image {
      max-width: 100%;
      max-height: 90vh;
      object-fit: contain;
      border-radius: 8px;
    }
    .gallery-modal-caption {
      color: white;
      text-align: center;
      margin-top: 15px;
      font-family: var(--font-sg);
      font-size: clamp(1.2em, 3vw, 1.5em);
    }
    .close-gallery-modal {
      position: absolute;
      top: -40px;
      right: -40px;
      color: white;
      font-size: 2em;
      cursor: pointer;
      padding: 10px;
    }
    /* Main Container 
       Thematic changes: Apply the same styling as the counter boxes to the main text box.
       Use DS Sans for Titles and Space Grotesk for black texts.
    */
    .container {
      width: min(85%, 900px);
      margin: 150px auto;
      padding: 50px;
      background: #fff;
      border: 3px solid #000;
      box-shadow: 8px 8px 0 #000;
      border-radius: 2px;
      text-align: center;
      position: relative;
      z-index: 2;
      animation: fadeIn 1.5s ease-in-out;
      font-family: var(--font-sg);
    }
    h1 {
      font-family: var(--font-ds);
      color: var(--primary-color);
      font-size: clamp(2.5em, 8vw, 5em);
      margin-bottom: 50px;
      animation: subtleBounce 2s infinite;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
    }
    .message {
      font-family: var(--font-sg);
      font-size: clamp(1.2em, 4vw, 2em);
      color: #000;
      margin-bottom: 50px;
      line-height: 1.6;
      animation: slideIn 1s;
    }
    /* Buttons Container */
    .buttons {
      display: flex;
      justify-content: center;
      gap: 40px;
      margin-bottom: 30px;
      position: relative;
      min-height: 120px;
    }
    /* Base Button Styles - Use DM Sans for button text */
    .button {
      position: relative;
      font-size: 1.5rem;
      cursor: pointer;
      font-weight: bold;
      line-height: 1;
      padding: 1px;
      outline: 2px solid transparent;
      outline-offset: 5px;
      border-radius: 9999px;
      background-color: transparent;
      color: transparent;
      transition: all 0.2s ease-in;
      text-align: center;
      min-width: 200px;
      box-shadow:
        0.5px 0.5px 0 0 #000,
        1px 1px 0 0 #000,
        1.5px 1.5px 0 0 #000,
        2px 2px 0 0 #000,
        2.5px 2.5px 0 0 #000,
        3px 3px 0 0 #000,
        0 0 0 2px #fff,
        0.5px 0.5px 0 2px #fff,
        1px 1px 0 2px #fff,
        1.5px 1.5px 0 2px #fff,
        2px 2px 0 2px #fff,
        2.5px 2.5px 0 2px #fff,
        3px 3px 0 2px #fff,
        3.5px 3.5px 0 2px #fff,
        4px 4px 0 2px #fff;
      transform: translate(-4px, -4px);
      overflow: hidden;
    }
    /* "No" Button Specific Styles */
    .button.no-btn {
      box-shadow: var(--no-btn-shadow);
    }
    /* Override for specific buttons: Scroll Down and Play Our Song */
    #scrollDownBtn > div,
    #playSongBtn > div {
      background-color: #ffffff !important;
    }
    #scrollDownBtn > div > span,
    #playSongBtn > div > span {
      font-size: 1rem !important;
      color: #000000 !important;
    }
    /* Override the dotted background pattern to black for specific buttons */
    #scrollDownBtn > div::before,
    #playSongBtn > div::before {
      background-image: radial-gradient(rgb(0 0 0 / 80%) 20%, transparent 20%),
        radial-gradient(rgb(0 0 0 / 100%) 20%, transparent 20%);
    }
    /* Button Pseudo-elements */
    .button::before {
      content: "";
      display: block;
      width: 0px;
      height: 86%;
      position: absolute;
      top: 7%;
      left: 0%;
      opacity: 0;
      background: #fff;
      box-shadow: 0 0 50px 30px #fff;
      transform: skewX(-20deg);
      transition: all 0.2s ease-out;
      pointer-events: none;
    }
    .button::after {
      content: "<3";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(120deg, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 0.5) 50%, rgba(255, 255, 255, 0) 100%);
      transform: skewX(-20deg) translateX(-100%);
      opacity: 0;
      pointer-events: none;
    }
    /* Ensure consistent hover effect for buttons, mirroring counter box animations */
    .button:hover {
      transform: translate(-4px, -4px);
      box-shadow: 12px 12px 0 #000;
    }
    .button:active {
      transform: translate(2px, 2px);
      box-shadow: 6px 6px 0 #000;
    }
    .button:focus-visible {
      outline-color: var(--red-400);
      outline-style: dashed;
    }
    /* Button Inner Div */
    .button > div {
      position: relative;
      pointer-events: none;
      background-color: var(--red-400);
      border: 2.5px solid rgba(255, 255, 255, 0.3);
      border-radius: 9999px;
      overflow: hidden;
      transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: var(--font-ds);
    }
    .button.no-btn > div {
      background-color: var(--gray-700) !important;
    }
    /* Dotted Background Pattern */
    .button > div::before {
      content: "";
      position: absolute;
      inset: 0;
      border-radius: 9999px;
      opacity: 0.5;
      background-image: radial-gradient(rgb(255 255 255 / 80%) 20%, transparent 20%),
        radial-gradient(rgb(255 255 255 / 100%) 20%, transparent 20%);
      background-position: 0 0, 4px 4px;
      background-size: 8px 8px;
      mix-blend-mode: hard-light;
      animation: dots 0.5s infinite linear;
      pointer-events: none;
    }
    /*
      1) Make only the text within the scroll down button and the play our song button font sizes slightly smaller.
      2) Change their background to white with black texts and black dots.
    */
    #scrollDownBtn > div,
    #playSongBtn > div {
      background-color: #ffffff !important;
    }
    #scrollDownBtn > div > span,
    #playSongBtn > div > span {
      font-size: 1rem !important;
      color: #000000 !important;
    }
    /* Override the dotted background pattern to black for specific buttons */
    #scrollDownBtn > div::before,
    #playSongBtn > div::before {
      background-image: radial-gradient(rgb(0 0 0 / 80%) 20%, transparent 20%),
        radial-gradient(rgb(0 0 0 / 100%) 20%, transparent 20%);
    }
    /* Button Text and Icons */
    .button > div > span {
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0.75rem 1.25rem;
      gap: 0.25rem;
      filter: drop-shadow(0 -1px 0 rgba(255, 255, 255, 0.25));
      color: #fff;
      text-transform: uppercase;
      letter-spacing: 2px;
      transition: transform 0.1s ease-in-out;
      font-size: 1.2rem;
      font-family: var(--font-ds);
    }
    .button > div > span:active {
      transform: translateY(2px);
    }
    /* Use <3 only for the YES button.
       For the YES button, we leave the default <3 content from .button::after intact.
       For the NO button, we override with ":(".
    */
    .button.no-btn > div > span::after {
      content: ":(";
      margin-left: 8px;
      font-size: 1rem;
    }
    /* Keyframes for Animations */
    @keyframes dots {
      0% {
        background-position: 0 0, 4px 4px;
      }
      100% {
        background-position: 8px 0, 12px 4px;
      }
    }
    @keyframes sh02 {
      from {
        opacity: 0;
        left: 0%;
      }
      50% {
        opacity: 1;
      }
      to {
        opacity: 0;
        left: 100%;
      }
    }
    @keyframes shine {
      0% {
        transform: skewX(-20deg) translateX(-100%);
        opacity: 0;
      }
      10% {
        opacity: 0.5;
      }
      50% {
        transform: skewX(-20deg) translateX(0%);
        opacity: 0.5;
      }
      90% {
        opacity: 0.5;
      }
      100% {
        transform: skewX(-20deg) translateX(100%);
        opacity: 0;
      }
    }
    /* Music Player */
    .music-player {
      width: 100%;
      text-align: center;
      margin: 40px 0;
    }
    /* Modal Styles */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      justify-content: center;
      align-items: flex-start;
      z-index: 1000;
      padding: max(var(--safe-area-inset-top), 20px) max(var(--safe-area-inset-right), 20px) max(var(--safe-area-inset-bottom), 20px) max(var(--safe-area-inset-left), 20px);
      overflow-y: auto;
    }
    .modal-content {
      background: #fff;
      padding: 40px;
      border-radius: 15px;
      text-align: center;
      position: relative;
      animation: fadeInModal 0.5s;
      max-width: 90%;
      width: 500px;
      margin: auto;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .modal-photo-container {
      width: 100%;
      max-width: 400px;
      height: 300px;
      margin: 20px 0;
      border: 3px solid var(--primary-color);
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      transition: all 0.3s ease;
      border-radius: 15px;
      overflow: hidden;
      position: relative;
    }
    .modal-photo-container:hover {
      border: 8px solid var(--primary-color);
      box-shadow: 0 0 20px 5px rgba(255, 107, 129, 0.5);
    }
    .modal-photo {
      width: 100%;
      height: 100%;
      object-fit: cover;
      object-position: center;
      transition: transform 0.3s ease;
    }
    .modal-photo-container:hover .modal-photo {
      transform: scale(1.05);
    }
    .modal-text {
      margin-top: 20px;
      max-width: 80%;
      font-family: var(--font-sg);
      color: #000;
      font-size: clamp(1.2em, 3vw, 1.5em);
      line-height: 1.5;
    }
    .close-modal {
      position: absolute;
      top: 15px;
      right: 20px;
      font-size: 1.5em;
      cursor: pointer;
      color: #aaa;
      transition: color 0.3s;
      padding: 5px;
    }
    .close-modal:hover {
      color: var(--primary-color);
    }
    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: scale(0.95);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }
    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    @keyframes fadeInModal {
      from {
        opacity: 0;
        transform: scale(0.9);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }
    @keyframes subtleBounce {
      0%, 100% {
        transform: translateY(0);
      }
      50% {
        transform: translateY(-10px);
      }
    }
    @keyframes subtleBounceBtn {
      0%, 100% {
        transform: translateY(0);
      }
      50% {
        transform: translateY(-5px);
      }
    }
    .scroll-down-subtle-bounce {
      animation: subtleBounceBtn 3s infinite;
    }
    /* Additional Spacing Under "Scroll Down" to force more scrolling */
    .scroll-down-container {
      text-align: center;
      margin-bottom: 600px;
    }
    /* Responsive Styles */
    @media (max-width: 1200px) {
      .gallery-grid {
        grid-template-columns: repeat(3, 1fr);
      }
    }
    @media (max-width: 992px) {
      .gallery-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }
    @media (max-width: 768px) {
      .gallery-section {
        margin: 100px auto;
        padding: 30px;
      }
      .gallery-grid {
        gap: 20px;
        padding: 10px;
      }
      .modal-photo-container {
        height: 180px;
      }
      .close-gallery-modal {
        top: -30px;
        right: -10px;
      }
      .container {
        padding: 30px;
        margin: 100px auto;
      }
      h1 {
        font-size: clamp(2.5em, 8vw, 3.5em);
        margin-bottom: 30px;
      }
      .message {
        font-size: clamp(1.2em, 4vw, 1.5em);
        margin-bottom: 30px;
      }
      .buttons {
        flex-direction: column;
        align-items: center;
        gap: 15px;
        min-height: 100px;
      }
      .button {
        font-size: 1.2rem;
        min-width: 140px;
      }
      .button > div > span {
        padding: 0.5rem 1rem;
      }
    }
    @media (max-width: 480px) {
      .gallery-grid {
        grid-template-columns: 1fr;
      }
      .gallery-item {
        aspect-ratio: 4/3;
      }
    }
    @media (pointer: coarse) {
      .gallery-item:hover {
        transform: none;
        box-shadow: var(--box-shadow-card);
      }
      .gallery-item:hover .gallery-image {
        transform: none;
      }
      .gallery-item:hover .gallery-caption {
        color: #000;
        transform: none;
      }
      .gallery-item:hover::before {
        opacity: 0;
      }
    }
  </style>
</head>
<body>
  <!-- Time Counters -->
  <div class="time-counter" id="dating-counter">
    <!-- Mini Heart Icon and Pop-Dots in Counter -->
    <svg class="heart-icon" viewBox="0 0 24 24" fill="currentColor">
      <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
    </svg>
    <div class="pop-dots"></div>
    <span class="counter-label">Together Since</span>
    <div class="time-values">
      <div class="numbers">
        <span id="dating-days">0</span>
        <span id="dating-hours">0</span>
      </div>
      <div class="labels">
        <span>Days</span>
        <span>Hours</span>
      </div>
    </div>
  </div>

  <div class="time-counter" id="valentine-counter">
    <!-- Mini Heart Icon and Pop-Dots in Counter -->
    <svg class="heart-icon" viewBox="0 0 24 24" fill="currentColor">
      <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
    </svg>
    <div class="pop-dots"></div>
    <span class="counter-label">Until Valentine's</span>
    <div class="time-values">
      <div class="numbers">
        <span id="valentine-days">0</span>
        <span id="valentine-hours">0</span>
      </div>
      <div class="labels">
        <span>Days</span>
        <span>Hours</span>
      </div>
    </div>
  </div>

  <!-- Funny Message -->
  <div class="funny-message" id="funnyMessage"></div>

  <!-- Floating Elements -->
  <div class="floating-elements" id="floatingElements"></div>

  <!-- Confetti -->
  <div class="confetti-container" id="confettiContainer"></div>

  <!-- Custom Cursor -->
  <div class="custom-cursor" id="customCursor">❄️</div>

  <!-- Gallery Section -->
  <section class="gallery-section">
    <h2 class="gallery-title">Our Journey Together</h2>
    <div class="gallery-grid">
      <div class="gallery-item">
        <div class="glass-overlay"></div>
        <div class="gallery-frame">
          <img src="images/first_date.jpg" loading="lazy" alt="First Date" class="gallery-image" />
          <p class="gallery-caption">First Date ❤️</p>
        </div>
      </div>
      <div class="gallery-item">
        <div class="glass-overlay"></div>
        <div class="gallery-frame">
          <img src="images/first_roadtrip.jpg" loading="lazy" alt="First Road Trip" class="gallery-image" />
          <p class="gallery-caption">Road Trip 🚗</p>
        </div>
      </div>
      <div class="gallery-item">
        <div class="glass-overlay"></div>
        <div class="gallery-frame">
          <img src="images/first_pet.jpg" loading="lazy" alt="First Pet" class="gallery-image" />
          <p class="gallery-caption">Our Pet 🐾</p>
        </div>
      </div>
      <div class="gallery-item">
        <div class="glass-overlay"></div>
        <div class="gallery-frame">
          <img src="images/farmcart.JPG" loading="lazy" alt="Farm Market" class="gallery-image" />
          <p class="gallery-caption">Farm Market 🚜</p>
        </div>
      </div>
      <div class="gallery-item">
        <div class="glass-overlay"></div>
        <div class="gallery-frame">
          <img src="images/stoneyriver.jpg" loading="lazy" alt="Stoney River" class="gallery-image" />
          <p class="gallery-caption">Stoney River 🌊</p>
        </div>
      </div>
      <div class="gallery-item">
        <div class="glass-overlay"></div>
        <div class="gallery-frame">
          <img src="images/kiss.jpg" loading="lazy" alt="Muah Muah" class="gallery-image" />
          <p class="gallery-caption">First Kiss 💋</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Scroll Down Button -->
  <div class="scroll-down-container" style="margin-bottom:600px;">
    <button id="scrollDownBtn" class="button scroll-down-subtle-bounce" aria-label="Scroll Down">
      <div><span>Scroll Down</span></div>
    </button>
  </div>

  <!-- Main Container -->
  <div class="container">
    <h1>Will You Be My Valentine?</h1>
    <p class="message">
      From the moment we met, you've brought so much joy and love into my life.
      Every day with you is a new adventure, and I can't imagine my life without you.
      Will you be my Valentine?
    </p>
    <div class="buttons">
      <button id="yesButton" class="button" aria-label="Yes">
        <div>
          <span>Yes</span>
        </div>
      </button>
      <button id="noButton" class="button no-btn" aria-label="No">
        <div>
          <span>No</span>
        </div>
      </button>
    </div>
  </div>

  <!-- Music Player -->
  <div class="music-player" style="margin-bottom: 60px;">
    <button id="playSongBtn" class="button" aria-label="Play Our Song">
      <div>
        <span>Play Our Song</span>
      </div>
    </button>
    <audio id="ourSong" src="our-song.mp3"></audio>
  </div>

  <!-- Gallery Modal -->
  <div id="galleryModal" class="gallery-modal">
    <div class="gallery-modal-content">
      <span class="close-gallery-modal">&times;</span>
      <img src="" alt="" class="gallery-modal-image" />
      <p class="gallery-modal-caption"></p>
    </div>
  </div>

  <!-- Success Modal -->
  <div id="modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle" aria-describedby="modalDescription">
    <div class="modal-content">
      <span class="close-modal" id="closeModal" aria-label="Close Modal">&times;</span>
      <h2 id="modalTitle" style="font-family: var(--font-ds); color: var(--primary-color); font-size: clamp(2.5em, 8vw, 5em);">
        Yay! <span style="color: red;">❤️</span>
      </h2>
      <!-- Once "Yes" is clicked, we'll add .gallery-style to match gallery look -->
      <div class="modal-photo-container">
        <img src="images/photo1.jpg" alt="Special Moment" class="modal-photo" />
      </div>
      <div class="modal-text" id="modalDescription">
        <p>I'm so happy you said yes! Looking forward to a wonderful Valentine's Day together.</p>
      </div>
    </div>
  </div>

  <script>
    // Witty messages when "No" tries to flee
    const wittyMessages = [
      "Intrigued yet?😉",
      "Consider it briefly.😏",
      "Plot twist: It's actually fun.😈",
      "*Record scratch* Still unsure?🙄",
      "Overthinking? Just feel it.😜",
      "Action > Thinking.🔥",
      "Angels *and* I say go for it.😇",
      "Indulge a little. Live a little.😈",
      "Sprinkles?😏",
      "'No' is boring.🤫",
      "Resistance is kinda cute.😉",
      "Think 'DEFINITE'.😜",
      "Worst choice🙃",
      "No regrets later.😈",
      "Regret-free zone now.😏",
      "Ghost later, live now.😒",
      "Good vibes.🌟",
      "I made this for you...😢",
      "You don't love me?🥺",
      "You trynna say something??😭"
    ];

    class NoButtonHandler {
      constructor(button, msg) {
        this.button = button;
        this.msg = msg;
        this.isMoving = false;
        this.messageTimeout = null;
        this.moveTimeout = null;
        this.pad = 20;

        ["mouseover", "focus", "click", "touchstart"].forEach(evt => {
          this.button.addEventListener(evt, (e) => {
            e.preventDefault();
            this.move();
          });
        });
      }

      move() {
        if (this.isMoving || this.button.disabled) return;
        this.isMoving = true;

        const r = this.button.getBoundingClientRect();

        // Convert to fixed positioning once "No" starts to run
        if (this.button.style.position !== "fixed") {
          this.button.style.position = "fixed";
          this.button.style.top = r.top + "px";
          this.button.style.left = r.left + "px";
          this.button.style.margin = "0";
        }

        this.button.style.transition = "all 0.4s ease-out";
        const n = this.newPos(r);

        this.button.style.left = n.x + "px";
        this.button.style.top = n.y + "px";
        this.showMsg(n, r);

        clearTimeout(this.moveTimeout);
        this.moveTimeout = setTimeout(() => {
          this.isMoving = false;
        }, 400);
      }

      newPos(br) {
        const vw = window.innerWidth;
        const vh = window.innerHeight;
        const sx = vw - br.width - this.pad;
        const sy = vh - br.height - this.pad;

        const cx = br.left;
        const cy = br.top;
        let nx, ny;

        do {
          nx = Math.min(Math.max(this.pad, Math.random() * sx), sx);
          ny = Math.min(Math.max(this.pad, Math.random() * sy), sy);
        } while (Math.abs(nx - cx) < 100 && Math.abs(ny - cy) < 100);

        return { x: nx, y: ny };
      }

      showMsg(np, br) {
        const msgTxt = wittyMessages[Math.floor(Math.random() * wittyMessages.length)];
        this.msg.textContent = msgTxt;
        this.msg.style.transition = "top 0.4s, left 0.4s, opacity 0.3s";

        let mx = np.x + br.width / 2;
        let my = np.y - 10;
        const w = window.innerWidth;
        const h = window.innerHeight;
        const off = 20;

        mx = Math.max(off, Math.min(mx, w - off));
        my = Math.max(off, Math.min(my, h - off));

        this.msg.style.left = mx + "px";
        this.msg.style.top = my + "px";
        this.msg.style.opacity = "1";

        clearTimeout(this.messageTimeout);
        this.messageTimeout = setTimeout(() => {
          this.msg.style.opacity = "0";
        }, 2000);
      }

      enable() {
        this.button.disabled = false;
        this.button.style.opacity = "1";
        this.button.style.cursor = "pointer";

        if (this.button.style.position === "fixed") {
          this.button.style.position = "static";
          this.button.style.top = "auto";
          this.button.style.left = "auto";
        }
      }

      disable() {
        this.button.disabled = true;
        this.button.style.opacity = "0.5";
        this.button.style.cursor = "not-allowed";

        if (this.button.style.position === "fixed") {
          this.button.style.position = "static";
          this.button.style.top = "auto";
          this.button.style.left = "auto";
        }
      }
    }

    /* Floating elements (hearts, sparkles, etc.) */
    class FloatingElementsManager {
      constructor(c) {
        this.c = c;
        this.emojis = ["✨", "❤️"];
        this.max = 20;
        this.int = null;
      }

      createEl() {
        const el = document.createElement("div");
        el.className = "floating-element";
        el.textContent = this.emojis[Math.floor(Math.random() * this.emojis.length)];
        el.style.left = `${Math.random() * 100}%`;
        const sz = Math.random() * 20 + 20;
        el.style.fontSize = `${sz}px`;
        const d = Math.random() * 5 + 5;
        el.style.animationDuration = d + "s";
        this.c.appendChild(el);

        setTimeout(() => {
          if (el.parentNode === this.c) {
            this.c.removeChild(el);
          }
        }, d * 1000);
      }

      start() {
        for (let i = 0; i < this.max / 2; i++) {
          this.createEl();
        }
        this.int = setInterval(() => {
          if (this.c.childNodes.length < this.max) {
            this.createEl();
          }
        }, 1000);
      }

      stop() {
        if (this.int) clearInterval(this.int);
        this.c.innerHTML = "";
      }
    }

    /* Confetti Manager */
    class ConfettiManager {
      constructor(co) {
        this.co = co;
        this.cv = document.createElement("canvas");
        this.cv.style.width = "100%";
        this.cv.style.height = "100%";
        this.cv.style.display = "block";
        this.cv.style.pointerEvents = "none";
        this.co.appendChild(this.cv);
        this.cx = this.cv.getContext("2d");

        this.cs = [
          "rgba(255,107,129,0.8)",
          "rgba(214,164,231,0.8)",
          "rgba(251,194,235,0.8)",
          "rgba(161,140,209,0.8)",
          "rgba(255,159,243,0.8)",
          "rgba(254,202,87,0.8)",
          "rgba(255,193,227,0.8)",
          "rgba(253,228,207,0.8)"
        ];

        this.ps = [];
        this.mp = 300;
        this.g = 0.05;
        this.d = 0.0005;
        this.af = null;

        this.resize();
        window.addEventListener("resize", () => this.resize());
      }

      resize() {
        this.cv.width = this.co.clientWidth;
        this.cv.height = this.co.clientHeight;
      }

      upd() {
        this.cx.clearRect(0, 0, this.cv.width, this.cv.height);

        for (let i = 0; i < this.ps.length; i++) {
          let p = this.ps[i];
          p.vy += this.g;
          p.vx *= 1 - this.d;
          p.vy *= 1 - this.d;

          p.x += p.vx;
          p.y += p.vy;

          p.r += p.rs;

          this.drawP(p);
          if (p.x < -100 || p.x > this.cv.width + 100 || p.y > this.cv.height + 100) {
            this.ps.splice(i, 1);
            i--;
          }
        }

        if (this.ps.length > 0) {
          this.af = requestAnimationFrame(() => this.upd());
        } else {
          this.af = null;
        }
      }

      drawP(p) {
        this.cx.save();
        this.cx.translate(p.x, p.y);
        this.cx.rotate(p.r);
        this.cx.beginPath();
        const s = p.sz;
        this.cx.moveTo(0, 0);
        this.cx.bezierCurveTo(-s / 2, -s / 2, -s, s / 4, 0, s);
        this.cx.bezierCurveTo(s, s / 4, s / 2, -s / 2, 0, 0);
        this.cx.closePath();
        this.cx.fillStyle = p.cl;
        this.cx.fill();
        this.cx.restore();
      }

      burst(cx, cy, count, m = false) {
        for (let i = 0; i < count; i++) {
          if (this.ps.length >= this.mp) break;
          const a = Math.random() * 2 * Math.PI;
          const sp = Math.random() * 4 + 3;
          const vx = Math.cos(a) * sp;
          const vy = Math.sin(a) * sp;

          // Smaller confetti if mobile
          const bs = m ? 8 : 12;
          const sr = m ? 10 : 16;

          this.ps.push({
            x: cx,
            y: cy,
            vx,
            vy,
            sz: bs + Math.random() * sr,
            cl: this.cs[Math.floor(Math.random() * this.cs.length)],
            r: Math.random() * 2 * Math.PI,
            rs: (Math.random() - 0.5) * 0.1
          });
        }
      }

      launch(m) {
        const tb = 5;
        const cnt = m ? 25 : 40;
        const intv = m ? 300 : 800;

        for (let i = 0; i < tb; i++) {
          setTimeout(() => {
            const cx = this.cv.width * 0.2 + Math.random() * this.cv.width * 0.6;
            const cy = this.cv.height * 0.2 + Math.random() * this.cv.height * 0.6;

            this.burst(cx, cy, cnt, m);
            this.spark(cx, cy);
            if (!this.af) this.upd();
          }, i * intv);
        }
      }

      spark(x, y) {
        for (let i = 0; i < 8; i++) {
          if (this.ps.length >= this.mp) break;
          const a = Math.random() * 2 * Math.PI;
          const sp = 1 + Math.random() * 2;
          const vx = Math.cos(a) * sp;
          const vy = Math.sin(a) * sp;
          this.ps.push({
            x,
            y,
            vx,
            vy,
            sz: 6 + Math.random() * 8,
            cl: "rgba(255,255,255,0.9)",
            r: Math.random() * 2 * Math.PI,
            rs: (Math.random() - 0.5) * 0.05
          });
        }
      }
    }

    function updateDatingCounter() {
      const start = new Date("2023-08-09");
      const now = new Date();
      const diff = now - start;

      const days = Math.floor(diff / (1000 * 60 * 60 * 24));
      const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));

      document.getElementById("dating-days").textContent = days;
      document.getElementById("dating-hours").textContent = hours;
    }

    function updateValentineCounter() {
      const now = new Date();
      let year = now.getFullYear();

      const valentineThisYear = new Date(year, 1, 14); // Feb 14
      if (now > valentineThisYear) {
        // If we've passed it this year, count for next year
        year += 1;
      }

      const nextValentine = new Date(year, 1, 14);
      const diff = nextValentine - now;

      const days = Math.floor(diff / (1000 * 60 * 60 * 24));
      const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));

      document.getElementById("valentine-days").textContent = days;
      document.getElementById("valentine-hours").textContent = hours;
    }

    function setupGalleryModal() {
      const galleryModal = document.getElementById("galleryModal");
      const modalImg = galleryModal.querySelector(".gallery-modal-image");
      const modalCap = galleryModal.querySelector(".gallery-modal-caption");
      const closeBtn = galleryModal.querySelector(".close-gallery-modal");

      const allButtons = document.querySelectorAll(".button");
      const musicPlayer = document.querySelector(".music-player");
      const timeCounters = document.querySelectorAll(".time-counter");

      document.querySelectorAll(".gallery-item").forEach((item) => {
        const img = item.querySelector(".gallery-image");
        const caption = item.querySelector(".gallery-caption");

        img.addEventListener("click", () => {
          modalImg.src = img.src;
          modalImg.alt = img.alt;
          modalCap.textContent = caption.textContent;

          galleryModal.style.display = "flex";

          // Hide buttons and music player for immersive experience
          allButtons.forEach((b) => (b.style.display = "none"));
          if (musicPlayer) musicPlayer.style.display = "none";
          // For MOBILE: Hide counter boxes when a picture is clicked
          if (window.matchMedia("(max-width: 768px)").matches) {
            timeCounters.forEach((tc) => (tc.style.display = "none"));
          }
        });
      });

      function closeGallery() {
        galleryModal.style.display = "none";
        allButtons.forEach((b) => (b.style.display = "inline-block"));
        if (musicPlayer) musicPlayer.style.display = "block";
        // For MOBILE: Restore counter boxes when the modal is closed
        if (window.matchMedia("(max-width: 768px)").matches) {
          timeCounters.forEach((tc) => (tc.style.display = "block"));
        }
      }

      closeBtn.addEventListener("click", closeGallery);

      window.addEventListener("click", (e) => {
        if (e.target === galleryModal) {
          closeGallery();
        }
      });

      window.addEventListener("keydown", (e) => {
        if (e.key === "Escape" && galleryModal.style.display === "flex") {
          closeGallery();
        }
      });
    }

    function setupMusicPlayer() {
      const playBtn = document.getElementById("playSongBtn");
      const audio = document.getElementById("ourSong");
      let playing = false;

      playBtn.addEventListener("click", () => {
        if (playing) {
          audio.pause();
          playBtn.querySelector("span").textContent = "Play Our Song";
          playBtn.classList.remove("playing");
        } else {
          audio.play().catch((e) => console.log(e));
          playBtn.querySelector("span").textContent = "Pause Our Song";
          playBtn.classList.add("playing");
        }
        playing = !playing;
      });

      audio.addEventListener("ended", () => {
        playing = false;
        playBtn.querySelector("span").textContent = "Play Our Song";
        playBtn.classList.remove("playing");
      });
    }

    document.addEventListener("DOMContentLoaded", () => {
      // Floating hearts/sparkles
      const floatingManager = new FloatingElementsManager(document.getElementById("floatingElements"));
      floatingManager.start();

      // No button logic
      const noBtnHandler = new NoButtonHandler(document.getElementById("noButton"), document.getElementById("funnyMessage"));

      // Confetti
      const confetti = new ConfettiManager(document.getElementById("confettiContainer"));

      // Yes button & success modal
      const modal = document.getElementById("modal");
      const modalContent = modal.querySelector(".modal-content");
      const yesButton = document.getElementById("yesButton");
      const closeModalBtn = document.getElementById("closeModal");
      let pressedYes = false;

      function showModal() {
        modal.style.display = "flex";
        modalContent.scrollIntoView({ behavior: "smooth", block: "center" });

        // Make the modal photo match the .gallery-item style
        document.querySelector(".modal-photo-container").classList.add("gallery-style");
      }

      yesButton.addEventListener("click", () => {
        showModal();
        const isMobile = window.matchMedia("(max-width: 768px)").matches;
        confetti.launch(isMobile);

        if (!pressedYes) {
          pressedYes = true;
          noBtnHandler.disable();
          yesButton.disabled = true;
        }
        closeModalBtn.focus();
      });

      function closeModal() {
        modal.style.display = "none";
        if (pressedYes) {
          pressedYes = false;
          noBtnHandler.enable();
          yesButton.disabled = false;
        }
        yesButton.focus();
      }

      closeModalBtn.addEventListener("click", closeModal);

      window.addEventListener("click", (e) => {
        if (e.target === modal) {
          closeModal();
        }
      });

      window.addEventListener("keydown", (e) => {
        if (e.key === "Escape" && modal.style.display === "flex") {
          closeModal();
        }
      });

      // Custom cursor for non-touch devices
      if (!window.matchMedia("(pointer: coarse)").matches) {
        document.addEventListener("mousemove", (e) => {
          const cursor = document.getElementById("customCursor");
          if (cursor) {
            cursor.style.left = e.clientX + "px";
            cursor.style.top = e.clientY + "px";
          }
        });

        yesButton.addEventListener("mouseenter", () => {
          const cursor = document.getElementById("customCursor");
          if (cursor) {
            cursor.classList.add("hover-yes");
          }
        });

        yesButton.addEventListener("mouseleave", () => {
          const cursor = document.getElementById("customCursor");
          if (cursor) {
            cursor.classList.remove("hover-yes");
          }
        });
      }

      // Scroll Down button
      const scrollDownBtn = document.getElementById("scrollDownBtn");
      if (scrollDownBtn) {
        scrollDownBtn.addEventListener("click", () => {
          // Center the container when scrolling
          document.querySelector(".container").scrollIntoView({ behavior: "smooth", block: "center" });
        });
      }

      // Set up gallery modal and music player
      setupGalleryModal();
      setupMusicPlayer();

      // Counters
      updateDatingCounter();
      updateValentineCounter();
      setInterval(() => {
        updateDatingCounter();
        updateValentineCounter();
      }, 1000 * 60 * 5); // Update every 5 minutes
    });
  </script>
</body>
</html>
